<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eello | Sign in with External Account</title>
    <link rel="stylesheet" data-preload="true" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma-rtl.min.css" />
    <link rel="stylesheet" data-preload="true" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />

    <style>
        html, body {
            height: 100%;
        }
        
        #api > .heading, .claims-provider-list-buttons > .intro {
            display: none;
        }
    </style>
    
    <script>
        window.onload = () => {
            console.log('page loaded. starting...')
            const unifiedSelectorDiv = document.querySelector('#api[data-name="Unified"]')
            if (unifiedSelectorDiv) {
                unifiedSelectorDiv.classList.add('card', 'p-5')
                unifiedSelectorDiv
                    .querySelector('.claims-provider-list-buttons > .options')
                    .childNodes
                    .forEach((e) => {
                        if (e.nodeType === Node.ELEMENT_NODE) {
                            e.classList.add('is-flex', 'mb-2', 'px-6', 'mx-6')
                            console.log('added classes')
                        }
                    })

                const googleAccountButton = unifiedSelectorDiv.querySelector('.accountButton#GoogleExchange')
                modifyActionButton(googleAccountButton, 'fab fa-google')

                const amazonAccountButton = unifiedSelectorDiv.querySelector('.accountButton#AmazonExchange')
                modifyActionButton(amazonAccountButton, 'fab fa-amazon')

                const appleAccountButton = unifiedSelectorDiv.querySelector('.accountButton#AppleExchange')
                modifyActionButton(appleAccountButton, 'fab fa-apple')

                const facebookAccountButton = unifiedSelectorDiv.querySelector('.accountButton#FacebookExchange')
                modifyActionButton(facebookAccountButton, 'fab fa-facebook-f')
            }
        }

        function modifyActionButton(button, icon, text) {
            if (text === undefined) {
                text = button.innerText
            }

            button.classList.add('button', 'is-flex-grow-1')

            const iconSpan = document.createElement('span')
            iconSpan.classList.add('icon', 'mx-2')
            iconSpan.innerHTML = `<i class="${icon}"></i>`

            const textSpan = document.createElement('span')
            textSpan.classList.add('mx-2')
            textSpan.innerText = text

            button.replaceChildren(iconSpan, textSpan)
            console.log('modified button', button.id)
        }
    </script>
</head>
<body>
    <section class="hero is-medium is-warning">
        <div class="hero-body">
            <p class="title">Sign in to eello</p>
            <p class="subtitle">with a third-party account provider</p>
        </div>
    </section>
    <section class="section">
        <div id="api" data-name="Unified">
            <div class="heading">
              <h1 role="heading">Sign in</h1>
            </div>
              <div class="claims-provider-list-buttons social" aria-label="Sign in with your social account" role="form">
                <div class="intro">
                  <h2 aria-level="1">Sign in with your social account</h2>
                </div>
                <div class="options">
                    <div>
                        <button class="accountButton firstButton claims-provider-selection" id="GoogleExchange" role="link" autofocus="">Google</button>
                    </div>
                    <div>
                        <button class="accountButton claims-provider-selection" id="AmazonExchange" role="link">Amazon</button>
                    </div>
                    <div>
                        <button class="accountButton claims-provider-selection" id="AppleExchange" role="link">Sign in with Apple</button>
                    </div>
                    <div>
                        <button class="accountButton claims-provider-selection" id="FacebookExchange" role="link">Facebook</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <footer class="footer">
        <div class="context has-text-centered">
            <p>
                &copy; <strong>eello</strong> 2022. All rights reserved.
            </p>
        </div>
    </footer>
</body>
</html>